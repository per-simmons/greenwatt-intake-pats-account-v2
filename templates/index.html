<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GreenWatt Intake System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <h1>GreenWatt Solar Intake Form</h1>
        
        <form id="intakeForm" enctype="multipart/form-data">
            <!-- 1. Agent ID -->
            <div class="form-group">
                <label for="agent_id">Agent ID*</label>
                <input type="text" id="agent_id" name="agent_id" required>
            </div>
            
            <!-- 2. Legal Business Entity Name (Not Required) -->
            <div class="form-group">
                <label for="business_entity">Legal Business Entity Name</label>
                <input type="text" id="business_entity" name="business_entity" placeholder="Optional - if different from Account Name">
            </div>
            
            <!-- 3. Account Name (as shown on the utility bill) -->
            <div class="form-group">
                <label for="account_name">Account Name (as shown on the utility bill)*</label>
                <input type="text" id="account_name" name="account_name" required>
            </div>
            
            <!-- 4. Contact Full Name -->
            <div class="form-group">
                <label for="contact_name">Contact Full Name*</label>
                <input type="text" id="contact_name" name="contact_name" required>
            </div>
            
            <!-- 5. Contact Title -->
            <div class="form-group">
                <label for="title">Contact Title*</label>
                <input type="text" id="title" name="title" required>
            </div>
            
            <!-- 6. Contact Phone Number -->
            <div class="form-group">
                <label for="phone">Contact Phone Number*</label>
                <input type="tel" id="phone" name="phone" required>
            </div>
            
            <!-- 7. Contact Email Address -->
            <div class="form-group">
                <label for="email">Contact Email Address*</label>
                <input type="email" id="email" name="email" required>
            </div>
            
            <!-- 8. Service Address(es) -->
            <div class="form-group">
                <label for="service_addresses">Service Address(es)*</label>
                <textarea id="service_addresses" name="service_addresses" rows="3" required></textarea>
            </div>
            
            <!-- 9. Utility (Updated dropdown with all utilities) -->
            <div class="form-group">
                <label for="utility_provider">Utility*</label>
                <select id="utility_provider" name="utility_provider" required>
                    <option value="">Select Utility</option>
                    <option value="National Grid">National Grid</option>
                    <option value="NYSEG">NYSEG</option>
                    <option value="RG&E">RG&E</option>
                </select>
            </div>
            
            <!-- 10. Account Type -->
            <div class="form-group">
                <label for="account_type">Account Type*</label>
                <select id="account_type" name="account_type" required>
                    <option value="">Select Account Type</option>
                    <option value="Small Demand <25 KW">Small Demand &lt;25 KW</option>
                    <option value="Large Demand >25 KW">Large Demand &gt;25 KW</option>
                    <option value="Mass Market [Residential]">Mass Market [Residential]</option>
                </select>
            </div>
            
            <!-- 11. Operator or Developer -->
            <div class="form-group">
                <label for="developer_assigned">Operator or Developer*</label>
                <select id="developer_assigned" name="developer_assigned" required>
                    <option value="">Select Operator/Developer</option>
                    <option value="Meadow Energy">Meadow Energy</option>
                    <option value="Solar Simplified">Solar Simplified</option>
                </select>
            </div>
            
            <!-- POID field (kept for backend compatibility) -->
            <div class="form-group">
                <label for="poid">POID <span id="poid_required" style="display: none;">*</span></label>
                <input type="text" id="poid" name="poid">
                <small id="poid_hint">Point of Delivery ID (required for NYSEG and RG&E)</small>
            </div>
            
            <!-- 12. Terms & Conditions and POA Checkbox -->
            <div class="form-group checkbox-group">
                <input type="checkbox" id="poa_agreement" name="poa_agreement" required>
                <label for="poa_agreement">I agree to Terms & Conditions and POA (Both GWUSA Solar Agency Agreement and POA)*</label>
            </div>
            
            <!-- 13. Upload Bill Button -->
            <div class="form-group">
                <label for="utility_bill">Upload Bill (JPEG or PDF)*</label>
                
                <!-- Mobile-friendly file input (visible on mobile) -->
                <div class="mobile-upload-container">
                    <input type="file" id="utility_bill" name="utility_bill" accept="image/*,.pdf" required class="file-input-mobile">
                    <label for="utility_bill" class="file-input-label">
                        <div class="upload-icon">ðŸ“„</div>
                        <div class="upload-text">Choose File</div>
                        <div class="upload-subtext">Tap to select from camera or photos</div>
                    </label>
                </div>
                
                <!-- Desktop drag-and-drop area (hidden on mobile) -->
                <div class="upload-area desktop-only" id="uploadArea">
                    <div class="upload-icon">ðŸ“„</div>
                    <div class="upload-text">Drag & drop your utility bill here</div>
                    <div class="upload-subtext">or <strong>click to browse</strong></div>
                    <input type="file" id="utility_bill_desktop" name="utility_bill_desktop" accept=".jpg,.jpeg,.pdf,.png" class="file-input-hidden">
                </div>
                
                <div id="fileInfo" class="file-info" style="display: none;"></div>
                <small>Upload JPEG or PDF</small>
            </div>
            
            <button type="submit" class="submit-btn">Submit Application</button>
        </form>
        
        <div id="loading" class="loading" style="display: none;">
            <div class="spinner"></div>
            <p>Processing your submission...</p>
        </div>
        
        <div id="result" class="result" style="display: none;"></div>
    </div>
    
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>